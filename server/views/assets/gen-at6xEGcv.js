import{r as d,c as C,a,w as o,E as i,b as y,d as I,o as O,e as f,f as U,g as k,h as B,i as F,j as S}from"./index-arY5h6ZH.js";const P={__name:"gen",setup(T){const v=[{label:"label",prop:"label",scope:"input"},{label:"prop",prop:"prop",scope:"input"},{label:"scope",prop:"scope",scope:"select",options:[{label:"input",value:"input"},{label:"select",value:"select"},{label:"number-col",value:"number-col"},{label:"render",value:"render"},{label:"tag",value:"tag"},{label:"img",value:"img"},{label:"table",value:"table"},{label:"btn",value:"btn"}]},{label:"是否是filter",prop:"filter",scope:"radio",options:[{label:"是",value:!0},{label:"否",value:!1}]},{label:"操作",prop:"operate",scope:"btn",options:[{text:"删除",event:"delete"}]}],m=(e,l)=>({label:e,prop:l,scope:"",filter:!1}),t=d([]),_=()=>{t.value.push(m())},g=e=>{t.value.splice(e,1)},r=d(),x=()=>{try{const e=JSON.parse(r.value);Object.keys(e).forEach(l=>{t.value.findIndex(u=>u.prop===l)===-1&&t.value.push(m(l,l))})}catch(e){i.error("解析失败: "+e)}},n=d({dirName:"/Users/zhangxiaochen/webstormProjects/tong-ying/game-admin/src",fileName:"index.vue"}),N=()=>t.value.map(e=>{const l={label:e.label,prop:e.prop,scope:e.scope||void 0};return["btn","table","tag","select"].includes(e.scope)&&(l.options=e.options||[]),l}),V=()=>t.value.filter(e=>e.filter).map(e=>({label:e.label,prop:e.prop,scope:e.scope==="tag"?"select":e.scope})),h=async()=>{const e={columns:N(),filter:V(),getList:"testApi",module:"test"},l=await fetch("http://localhost:3000/generate",{method:"POST",body:JSON.stringify({...n.value,params:e}),headers:{"Content-Type":"application/json"}}).then(s=>s.json());console.log(l),l.code===200?(i.success("创建成功"),t.value=[],n.value={dirName:"",fileName:"index.vue"}):i.error(l.msg)};return(e,l)=>{const s=U,u=k,c=B,E=F,b=y,j=S("v-table"),w=I;return O(),C("div",null,[a(w,null,{default:o(()=>[a(E,{gutter:20},{default:o(()=>[a(c,{span:12},{default:o(()=>[a(u,{label:"文件夹路径"},{default:o(()=>[a(s,{modelValue:n.value.dirName,"onUpdate:modelValue":l[0]||(l[0]=p=>n.value.dirName=p)},null,8,["modelValue"])]),_:1})]),_:1}),a(c,{span:12},{default:o(()=>[a(u,{label:"文件名"},{default:o(()=>[a(s,{modelValue:n.value.fileName,"onUpdate:modelValue":l[1]||(l[1]=p=>n.value.fileName=p)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(c,{span:24},{default:o(()=>[a(u,{label:"接口返回值"},{default:o(()=>[a(s,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=p=>r.value=p),type:"textarea",rows:10},null,8,["modelValue"]),a(b,{onClick:x},{default:o(()=>[f("解析")]),_:1})]),_:1})]),_:1}),a(u,{label:"表格内容"},{default:o(()=>[a(j,{columns:v,data:t.value,"on-add":_,onDelete:g},null,8,["data"])]),_:1})]),_:1}),a(b,{onClick:h},{default:o(()=>[f("提交")]),_:1})])}}};export{P as default};
